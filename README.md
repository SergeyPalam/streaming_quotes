# streaming_quotes
> **Клиентское и серверное приложение для приема и стриминга котировок соответственно**

## Сборка:

Перейти в корень проекта и выполнить команду:

```
cargo build
```

В директории target будет сформировано два приложения (для windows это client.exe и server.exe)

## Запуск сервера

Сначала необходимо запустить сервер. Для этого нужно перейти в командную строку и выполнить:

```
server.exe --config-path <CONFIG_PATH>
```

, где CONFIG_PATH путь к конфигурации сервера в формате json.
Пример конфигурации:

```
[
    {
        "name": "AMD",
        "upper_bound_price": 1000.0,
        "upper_bound_volume": 1000000,
        "lower_bound_volume": 1000
    },
    {
        "name": "INT",
        "upper_bound_price": 2000.0,
        "upper_bound_volume": 2000000,
        "lower_bound_volume": 1000
    },
    {
        "name": "GAZ",
        "upper_bound_price": 3000.0,
        "upper_bound_volume": 3000000,
        "lower_bound_volume": 3000
    }
]
```

Т.к. сервер эмулирует колебания цен для различных тикеров с помощью генератора случайных чисел, то
параметры этого генератора для каждого тикера должны быть заданы:

```
{
    "name": "<ИМЯ ТИКЕРА>",
    "upper_bound_price": "<ВЕРХНЯЯ ЦЕНА ТИКЕРА>",
    "upper_bound_volume": "<ВЕРХНЕЕ ЗНАЧЕНИЕ ОБЪЁМА ТОРГОВ ПО ТИКЕРУ>",
    "lower_bound_volume": "<НИЖНЕЕ ЗНАЧЕНИЕ ОБЪЁМА ТОРГОВ ПО ТИКЕРУ>"
}
```

После выполнения команды, сервер запустится на tcp порту 80 и будет слушать соединения от клиентов.
Чтобы остановить сервер, введите команду exit.

## Запуск клиента

В командной строке введите:

```
client.exe --server <ip_addr:port> --port <QUOTES_PORT> --tickers-path <PATH_TO_TICKERS>
```
, где ip_addr:port - ip-адрес и порт сервера по, которому будет установлено tcp-соединение.
QUOTES_PORT - это  UDP-порт, на который клиент будет получать информацию по котировкам.
<PATH_TO_TICKERS> - путь к текстовому файлу, где перечеслены котировки в формате:

```
TICKER1
TICKER2
TICKER3
```

Эти тикеры передадутся на сервер и именно по ним будет приходить информация.
После выполнения команды клиентский процесс запустится и в терминале периодически будут
отображаться котировки. Чтобы остановить клиента, введите команду exit.
